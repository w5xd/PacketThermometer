Version 4.1
SHEET 1 2004 680
WIRE 1008 -208 912 -208
WIRE 912 -192 912 -208
WIRE 1008 -192 1008 -208
WIRE 1232 -176 1104 -176
WIRE 1408 -176 1296 -176
WIRE -144 -80 -160 -80
WIRE -32 -80 -144 -80
WIRE 336 -80 -32 -80
WIRE -160 -48 -160 -80
WIRE 1408 -32 1408 -176
WIRE 1408 -32 1296 -32
WIRE 1296 0 1296 -32
WIRE 208 16 16 16
WIRE 336 16 336 -16
WIRE 448 16 336 16
WIRE 544 16 512 16
WIRE 624 16 544 16
WIRE 640 16 624 16
WIRE 736 16 640 16
WIRE 784 16 736 16
WIRE 16 48 16 16
WIRE 784 48 784 16
WIRE 944 48 848 48
WIRE 1008 48 1008 -128
WIRE 1008 48 944 48
WIRE 1104 48 1104 -176
WIRE 1104 48 1008 48
WIRE 1184 48 1104 48
WIRE -160 64 -160 32
WIRE 544 64 544 16
WIRE 1008 64 1008 48
WIRE 640 80 640 16
WIRE 1008 80 1008 64
WIRE 208 112 208 16
WIRE 336 112 336 16
WIRE 336 128 336 112
WIRE 16 160 16 128
WIRE 544 176 544 128
WIRE 640 176 640 160
WIRE 640 176 544 176
WIRE 736 176 736 16
WIRE 864 176 736 176
WIRE 1200 176 944 176
WIRE 640 192 640 176
WIRE 240 224 208 224
WIRE 336 224 336 176
WIRE 336 224 320 224
WIRE 1296 224 1296 112
WIRE 1296 224 1280 224
WIRE 1344 224 1296 224
WIRE 336 256 336 224
WIRE -32 304 -32 -80
WIRE 96 304 96 160
WIRE 96 304 -32 304
WIRE 240 304 96 304
WIRE 1200 320 1200 272
WIRE 336 368 336 352
FLAG 336 368 0
FLAG -160 64 0
FLAG 16 160 0
FLAG 640 192 0
FLAG 1008 128 0
FLAG 1408 48 0
FLAG 1344 304 0
FLAG -144 -80 Charge
IOPIN -144 -80 Out
FLAG 944 48 PortD3
FLAG 624 16 Vc3
IOPIN 624 16 Out
FLAG 912 -112 0
FLAG 1200 320 0
SYMBOL cap 320 112 R0
WINDOW 3 28 50 Left 2
SYMATTR Value .47µF
SYMATTR InstName C10
SYMBOL diode 320 -80 R0
WINDOW 0 46 10 Left 2
WINDOW 3 -178 35 Left 2
SYMATTR InstName D10
SYMATTR Value Drb751v40t1g
SYMBOL voltage -160 -64 R0
WINDOW 3 24 44 Invisible 2
WINDOW 39 24 72 Left 2
SYMATTR Value PWL REPEAT FOR 90 (0 0 0.0009 0 .001 3.3 0.002 3.3 0.0021 0) ENDREPEAT
SYMATTR SpiceLine Rser=1
SYMATTR InstName V1
SYMBOL voltage 16 32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -34 161 Left 2
SYMATTR SpiceLine Rser=1
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL DMP2305U 160 144 R180
WINDOW 3 -64 40 Top 2
SYMATTR InstName U1
SYMBOL res 624 64 R0
SYMATTR InstName R11
SYMATTR Value 3.3e6
SYMBOL cap 992 64 R0
SYMATTR InstName C12
SYMATTR Value .47µF
SYMATTR SpiceLine Rpar=100000000
SYMBOL diode 848 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D12
SYMATTR Value Drb751v40t1g
SYMBOL voltage 1408 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3.3
SYMBOL DMP2305U 1248 32 R180
WINDOW 3 18 23 Top 2
SYMATTR InstName U2
SYMBOL res 1328 208 R0
SYMATTR InstName R13
SYMATTR Value 1e6
SYMBOL res 224 240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 15 3 VBottom 2
SYMATTR InstName R10
SYMATTR Value 680
SYMBOL cap 528 64 R0
SYMATTR InstName C11
SYMATTR Value 22µF
SYMBOL diode 448 0 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D11
SYMATTR Value Drb751v40t1g
SYMBOL voltage 912 -208 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 -109 33 Left 2
SYMATTR Value PWL(0 0 0.0001 3.3 .1 3.3 .11 0)
SYMATTR SpiceLine Rser=1
SYMATTR InstName V4
SYMBOL diode 992 -192 R0
SYMATTR InstName D1
SYMBOL res 960 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 10000
SYMBOL diode 1232 -160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value BAT54
SYMBOL DMG3406L 288 304 M0
WINDOW 3 117 9 Top 2
WINDOW 0 -28 5 Bottom 2
SYMATTR InstName Q11
SYMBOL DMG3406L 1248 224 R0
WINDOW 3 -129 11 Top 2
SYMATTR InstName Q13
TEXT -184 384 Left 2 !.tran 0 75 0 .0005
TEXT 496 352 Left 4 ;Battery Extender Circuit
TEXT 720 -304 Left 2 ;Port D3 on Arduino is simulated by this V4+D1. Neither V4, D1 is on PCB.\ndiode D5 is body diode on Arduino
TEXT 720 -248 Left 2 ;Software holds V4 at +Vcc during V1's PWM, then switches to INPUT
TEXT -120 -144 Left 2 ;port D4 runs 2msec PWM period for 100 cycles (200msec)
TEXT 1312 88 Left 2 ;P channel MOSFETS: 1V threshold or lower
TEXT 1312 192 Left 2 ;N channel MOSFETS 2.5V threshold or lower
TEXT 144 112 Left 2 ;Q10
TEXT 1208 96 Left 2 ;Q12
TEXT -120 -112 Left 2 ;and ends (sleeps) at 0V
TEXT -184 424 Left 2 !.include "RB751V40T1G.LIB.txt"
RECTANGLE Normal 1552 -64 688 -336 2
